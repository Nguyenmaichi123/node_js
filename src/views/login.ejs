<h2 class="text-center mb-4">ﾄ斉ハg nh蘯ｭp</h2>

<form id="loginForm" class="mx-auto" style="max-width: 400px">
  <div class="mb-3">
    <label for="username" class="form-label">Tﾃｪn ﾄ惰ハg nh蘯ｭp</label>
    <input type="text" class="form-control" id="username" required />
  </div>

  <div class="mb-3">
    <label for="password" class="form-label">M蘯ｭt kh蘯ｩu</label>
    <input type="password" class="form-control" id="password" required />
  </div>

  <button type="submit" class="btn btn-primary w-100">ﾄ斉ハg nh蘯ｭp</button>
</form>

<script>
  document
    .querySelector("#loginForm")
    .addEventListener("submit", async function (e) {
      e.preventDefault();

      const username = document.querySelector("#username").value;
      const password = document.querySelector("#password").value;

      const res = await fetch("/api/auth/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ username, password }),
      });

      const data = await res.json();

      if (res.ok) {
        // 笨 Lﾆｰu token vﾃo localStorage
        localStorage.setItem("token", data.token);

        // 汨 Chuy盻ハ hﾆｰ盻嬾g sang trang ch盻ｧ ho蘯ｷc dashboard
        window.location.href = "/";
      } else {
        alert(data.message || "ﾄ斉ハg nh蘯ｭp th蘯･t b蘯｡i!");
      }
    });
</script>
